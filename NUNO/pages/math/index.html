<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Mathematical Universe</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Architects+Daughter&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Link to our CSS -->
    <link rel="stylesheet" href="style.css">

    <!-- Konva.js Library -->
    <script src="https://unpkg.com/konva@9/konva.min.js"></script>

    <!-- MathJax Configuration & Library -->
    <script>
        MathJax = {
          tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']], // Define inline math delimiters
            displayMath: [['$$', '$$'], ['\\[', '\\]']] // Define display math delimiters
          },
          svg: {
            fontCache: 'global'
          },
          options: {
            skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            ignoreHtmlClass: 'tex2jax_ignore',
            processHtmlClass: 'tex2jax_process'
          }
        };
        </script>
    <script type="text/javascript" id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
    </script>

    <!-- Optional: p5.js for visualizations (load if needed) -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script> -->
    <!-- Optional: math.js for computation (load if needed) -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.9.1/math.min.js"></script> -->

</head>
<body class="theme-blueprint"> <!-- Start with blueprint theme -->

    <!-- Simple Search Input -->
    <div class="control-cluster"> <!-- Group controls together -->
        <div class="search-container">
            <input type="text" id="search-input" placeholder="Find a concept...">
            <button id="search-btn"><i class="fa-solid fa-search"></i></button>
        </div>

        <!-- NEW Subject Navigation -->
        <nav id="subject-navigation" class="subject-nav-container" aria-label="Subject Areas">
            <!-- Buttons will be generated by JS -->
        </nav>
    </div>

     <!-- Theme Switcher Button (Optional) -->
    <button id="theme-switcher-btn" aria-label="Switch Theme">
        <i class="fa-solid fa-palette"></i> <!-- Switch Theme -->
    </button>

    <!-- Konva Canvas Container -->
    <div id="canvas-container"></div>

    <!-- Concept Information Overlay Panel -->
    <aside id="concept-overlay" class="tex2jax_ignore">
        <button id="close-overlay-btn" aria-label="Close Panel">Ã—</button>
        <div class="overlay-content">
            <h2 id="concept-title">Concept Title</h2>

            <section id="concept-my-take" class="overlay-section my-take">
                <h3><i class="fa-regular fa-lightbulb"></i> My Take</h3>
                <p>My intuitive explanation will appear here...</p>
            </section>

            <section id="concept-playground" class="overlay-section playground">
                <h3><i class="fa-solid fa-flask-vial"></i> The Playground</h3>
                <div id="visualization-container">
                    <!-- Interactive visualization will be loaded here -->
                    <p>Interactive element placeholder.</p>
                </div>
            </section>

            <section id="concept-workbench" class="overlay-section workbench">
                <h3><i class="fa-solid fa-calculator"></i> The Workbench</h3>
                <div id="tool-container">
                    <!-- Computational tool will be loaded here -->
                    <p>Computational tool placeholder.</p>
                </div>
            </section>

             <section id="concept-formal" class="overlay-section formal-bits">
                <h3><i class="fa-solid fa-scroll"></i> The Blueprint (Formal Bits)</h3>
                <div id="formal-content">
                    <p>Formal definitions and formulas placeholder.</p>
                </div>
            </section>

            <section id="concept-connections" class="overlay-section connections">
                <h3><i class="fa-solid fa-diagram-project"></i> Explore Nearby</h3>
                <ul id="connections-list">
                    <!-- Links to connected concepts will appear here -->
                    <li><a href="#" data-target-id="some-id">Related Concept</a></li>
                </ul>
            </section>

            <section id="concept-resources" class="overlay-section resources">
                <h3><i class="fa-solid fa-book-open-reader"></i> Further Journeys</h3>
                <ul id="resources-list">
                    <!-- Links to external resources will appear here -->
                    <li><a href="#" target="_blank"><i class="fa-solid fa-video"></i> Video Title</a></li>
                </ul>
            </section>
        </div>
    </aside>

    <!-- Link to Our JavaScript -->
    <script src="script.js"></script>
</body>
</html>